# Разбиение массива на группы

В данном уроке я изучал метод разбиения массива на две части, подготовительная часть к "Быстрой сортировке".

Данный алгоритм делает следующую вещь:
- *разбивает массив а две группы так, чтобы элементы группы левее опорного элемента были меньше его, а элементы правой группы были больше*

Достигается это засчет выделения опорного элемента (средний индекс), проход двумя указателями с обоих концов, а также использование рекурсии для проверки крайнего случая. Мысль о рекурсии как раз пришла при рефакторинге, так как с помощью него можно проверить крайний случай, который очень важен!
Например случаи типа:

- [3, 1, 2]
- [40, 13, 4, 1]
без рекурсии могут получиться:

- [1, 3, 2]
- [1, 13, 4, 40]

что не подходит по спецификации, так как относительно опорного элемента группы получились неверными!

Результат:

```python
# t = O(n), n = len(M)
# mem = O(1)
def ArrayChunk(M):
    size = len(M)
    if size < 2:
        return 0
    
    i1, i2 = 0, size-1
    basic_indx = size // 2
    N = M[basic_indx]

    while i1 < i2 - 1:
        
        while M[i1] < N:
            i1+=1

        while M[i2] > N:
            i2-=1
        
        if M[i1] == N:
            basic_indx = i1
        
        if M[i2] == N:
            basic_indx = i2
        
        if i1 == i2 - 1:
            break

        M[i1], M[i2] = M[i2], M[i1]
    
    if M[i1] > M[i2]:
        M[i1], M[i2] = M[i2], M[i1]
        basic_indx = ArrayChunk(M)

    if i1 == i2 or (i1 == i2 - 1 and M[i1] < M[i2]):
        return basic_indx

    return basic_indx
```
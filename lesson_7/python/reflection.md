# Рефлексия

Алгоритм поиска порядковых статистик заключается в том, что в неотсортированном массиве найти элемент, который будет стоять под k-ым индексом уже в отсортированном массиве.

Суть алгоритма заключается в разбиении также массива на части отталкиваясь от опорного элемента, и на каждой итерации проверять опорный элемент с k-ой статистикой.

Таким образом мы исключаем алгоритм полной сортировки и можем найти нужный нам элемент сразу.

Есть несколько разновидностей данного алгоритма:

1. Вычисление приблеженной медианы для нахождения k-ой статистики ([метод Манро-Патерсона](https://habr.com/ru/articles/264987/)), заключается он в том, чтобы уменьшить разброс от k, так чтобы k-j и k+j статистики были максимально близки. Используется дополнительный буфер памяти
2. **BFPRT-алгоритм** (Мануэль Блюм и др.) - в данном алгоритме мы усложняем используемую для хранения структуру данных и основная идея в том, чтобы количество элементов меньше опорного должно быть не меньше 3 * N / 10, а количество элементов больших опорного не должно превышать то же количество

> Алгоритм:
> 
> 1. Входной массив из n элементов разбивается на группы по 5 (или большее нечётное количество) элементов. В последней группе будет (n % 5) элементов (в частности, ноль). 
> 
> 2. Каждая группа сортируется, и для неё определяется медиана.
> 
> 3. Находится медиана для всех медиан - s. Она специфична тем, что в массиве будет не менее 25% элементов, меньших её, и не менее 25% элементов, больших её.
> 
> 4. Разбиение массива на основе s потребует анализа (сравнения) только половины элементов, так как две четверти уже отсортированы относительно s. Если позиция i медианы s равна k, то искомый элемент найден.
> 
> Иначе применяем этот алгоритм к левой части разбиения (если i больше k), или к правой в противном случае. 
> 
> Так как мы на каждом шаге отбрасываем как минимум четверть (а в лучшем случае три четверти) элементов, то получаем гарантированное линейное время.

